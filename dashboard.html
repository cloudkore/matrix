<!DOCTYPE html>
<html lang="en">
<head>
    <title>NinjaBase Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/dashboard.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="js/sound.js"></script>
    <script src="js/essentials.js"></script>
</head>
<body>
    <div id="navbar-placeholder"></div>
    <iframe id="fullScreenPenEffect" src="pen_effect.html" frameborder="0" scrolling="no"></iframe>

    <div id="setup-section" style="display:none;">
        <h3>Set Username & Choose Avatar</h3>
        <input id="usernameInput" type="text" class="form-control mb-3" placeholder="Enter username" />

        <div class="avatar-selector">
            <button id="prevAvatarBtn" class="nav-btn">&lt;</button>
            <div id="currentAvatarWrapper" class="avatar-wrapper">
                <img id="currentAvatarDisplay" src="" alt="Selected Avatar" class="avatar-display" />
            </div>
            <button id="nextAvatarBtn" class="nav-btn">&gt;</button>
        </div>

        <div class="inputBx master-password-setup-field">
            <input type="password" id="masterPasswordInput" placeholder="Enter Master Password" class="form-control mb-2">
        </div>
        <div class="inputBx master-password-setup-field">
            <input type="password" id="confirmMasterPasswordInput" placeholder="Confirm Master Password" class="form-control mb-3">
        </div>

        <button id="saveProfileBtn" class="btn btn-success">Save Profile</button>
    </div>

    <div id="main-dashboard" style="display:none;">
        <h2>Welcome, <span id="dashboard-username"></span>!</h2>
        <img id="user-avatar" src="" alt="Avatar" class="user-avatar-display" />
        <div class="dashboard-buttons">
            <button id="serverBtn" class="btn btn-primary">Server</button>
            <button id="notesBtn" class="btn btn-secondary">Notes</button>
            <button id="passwordManagerBtn" class="btn btn-secondary">Password Manager</button>
            <button id="deleteAccountBtn" class="btn btn-danger mt-3">Delete Account</button>
            <button id="logoutBtn" class="btn btn-danger mt-3">Logout</button>
        </div>
    </div>

    <div id="masterPasswordPromptModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-button" data-modal="masterPasswordPromptModal">&times;</span>
            <h3>Enter Master Password to Unlock</h3>
            <input type="password" id="masterPasswordUnlockInput" class="form-control mb-3" placeholder="Master Password" />
            <button id="unlockDashboardBtn" class="btn btn-primary">Unlock Dashboard</button>
            <button id="forgotPasswordBtn" class="btn btn-link mt-2" style="color: #66ccff;">Forgot Master Password?</button>
        </div>
    </div>

    <div id="notesModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-button" data-modal="notesModal">&times;</span>
            <h3>Your Notes</h3>
            <textarea id="noteInput" placeholder="Write your notes here..." class="form-control mb-3"></textarea>
            <button id="saveNoteBtn" class="btn btn-success">Save Note</button>
            <div id="savedNotesDisplay" class="saved-notes-display"></div>
        </div>
    </div>

    <div id="passwordManagerModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-button" data-modal="passwordManagerModal">&times;</span>
            <h3>ID/Password Manager</h3>
            <input type="text" id="pmServiceName" class="form-control mb-2" placeholder="Service Name (e.g., Google)" />
            <input type="text" id="pmUsername" class="form-control mb-2" placeholder="Username/Email" />
            <input type="password" id="pmPassword" class="form-control mb-3" placeholder="Password" />
            <button id="savePmEntryBtn" class="btn btn-success">Save Entry</button>
            <div id="pmEntryList" class="file-list-display"></div>
        </div>
    </div>

    <div id="deleteAccountConfirmModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-button" data-modal="deleteAccountConfirmModal">&times;</span>
            <h3>Confirm Account Deletion</h3>
            <p>Are you sure you want to delete your account? This action cannot be undone.</p>
            <button id="confirmDeleteAccountBtn" class="btn btn-danger">Yes, Delete My Account</button>
            <button id="cancelDeleteAccountBtn" class="btn btn-secondary">No, Keep My Account</button>
        </div>
    </div>

    <div id="customMessageBox" class="custom-message-box" style="display:none;">
        <p id="messageBoxText"></p>
    </div>

    <div id="footer-placeholder"></div>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
